import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;


public class ComparisonDriver {
	public static void writeComparisons(String base, String[] morphs, String outfile) throws IOException {

		// mwor_0.5
		File[] base_file = new File(base).listFiles();

		// mwor_1.0, 1.5,2.0,3.0
		List<File[]> file_lists = new ArrayList<File[]>();
		for (String m : morphs) {
			File[] mor_file = new File(m).listFiles();
			file_lists.add(mor_file);
		}
		
		BufferedWriter br = new BufferedWriter(new FileWriter(outfile));
		// Header.
		br.write("filename ,");
		for (String m : morphs) {
			br.write(m + "@cosine, ");
			br.write(m + "@mishras, ");
		}
		br.newLine();
		
		
		for (int i = 0; i < base_file.length; i++) {
			br.write(base_file[i].getName() + ", ");
			for (File[] ff : file_lists) {
				double cosine = CosineSimilarity.compareFiles(base_file[i], ff[i]);
				double mish = MishrasMethod.compareFiles(base_file[i], ff[i]);
				
				br.write(cosine + ", " + mish + ", ");
			}
			br.newLine();
		}
		br.close();
	}
	
	
	public static void main(String[] args) throws IOException {

//		String base = "/home/dragon/abitha/CS297/InputFiles/0_5/";
//		String[] morphs = {"/home/dragon/abitha/CS297/InputFiles/1_0/",
//				"/home/dragon/abitha/CS297/InputFiles/1_5/",
//				"/home/dragon/abitha/CS297/InputFiles/2_0/",
//				"/home/dragon/abitha/CS297/InputFiles/3_0/"};
//		String outfile = "/home/dragon/abitha/CS297/merged_comparison.csv";
		
//		String base = "/home/dragon/Downloads/DatasetfromFabio/tmp/winwebsec/morphinput/";
//		String[] morphs = {"/home/dragon/Downloads/DatasetfromFabio/tmp/winwebsec/morphoutput-10-percent/",
//				"/home/dragon/Downloads/DatasetfromFabio/tmp/winwebsec/morphoutput-20-percent/",
//				"/home/dragon/Downloads/DatasetfromFabio/tmp/winwebsec/morphoutput-30-percent/",
//				"/home/dragon/Downloads/DatasetfromFabio/tmp/winwebsec/morphoutput-40-percent/" };
//		
		String base = "/home/dragon/abitha/CS297/DeletionMorphInput/";
		String[] morphs={
		"/home/dragon/abitha/CS297/DeletionMorphOutput/0.1/",
		"/home/dragon/abitha/CS297/DeletionMorphOutput/0.1-0.1/",
		"/home/dragon/abitha/CS297/DeletionMorphOutput/0.1-0.1-0.1/",
		"/home/dragon/abitha/CS297/DeletionMorphOutput/0.1-0.1-0.1-0.1/"
		};		
		String outfile = "/home/dragon/abitha/CS297/DeletionMorphOutput/Winwebsec_deletionmorph.csv";
		writeComparisons(base, morphs, outfile);
		
	
	}

}
