public class GraphComparison {
	/*
	 * Compares two opcode-graphs.
	 * Compare(A, A) -> 1.0 
	 * Compare(A, 0) , (0,A) -> 0.0
	 */
	public static  float compareGraphs(float[][] m1, float[][] m2) {
		float total_diff = 0;
		int n = m1.length;
		for (int i = 0; i < n; i++) {
			float row_diff_sum = 0;
			for (int j = 0; j < n; j++) {
				row_diff_sum += (Math.abs(m1[i][j] - m2[i][j]));
			}
			total_diff += row_diff_sum; // * row_diff_sum;
		}
		//System.out.println("total : " + total_diff);
		float score = (float) (total_diff * total_diff / (n * n * 1.0));
		return score;
	}
	
//	public static void main(String args[]) throws IOException {
//		String base_dir="/Users/vinodh/abitha/Fall2015/CS298/InputOpcodes/zeroaccess_opcodes/zeroaccess_base/";
//		String outfile_dir="/Users/vinodh/abitha/Fall2015/CS298/InputOpcodes/zeroaccess_opcodes/zeroaccess_del_morph/0access_del_0.4/";
//		String outfile="/Users/vinodh/abitha/Fall2015/CS298/Scores/OpcodeGraph/Zeroaccess_Scores/0access_del0.4scores.csv";
//
//		File[] files1 = new File(base_dir).listFiles();
//		File[] files2 = new File(outfile_dir).listFiles();
//		if (files1.length != files2.length) {
//			System.out.println("Error: Different number of files");
//			return;
//		}
//		for (int i = 0; i < files1.length; i++) {
//			System.out.println("Processing files " + i);
//			double score = GraphComparison.compareGraphs(OpcodeGraph.file2transMatrix(files1[i]),
//					OpcodeGraph.file2transMatrix(files2[i]));
//
//			BufferedWriter br1 = new BufferedWriter(new FileWriter(outfile,true));
//			br1.write(files1[i].getName()+" , "+files2[i].getName() + " , " + score + "\n");
//			br1.flush();
//			br1.close();
//		}
//
//
//		//		float[][] m1 = OpcodeGraph.file2transMatrix("/Users/vinodh/abitha/Fall2014/CS297/0_5/MWOR_0.hmm");
//		//		float[][] m2 = OpcodeGraph.file2transMatrix("/Users/vinodh/abitha/Fall2014/CS297/2_0/MWOR_0.hmm");
//		//
//		System.out.println("Scoring completed");
//	}
}
